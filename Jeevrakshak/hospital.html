<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeevrakshak Hospital Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="hospital.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="hospital-body">
    <div class="background-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>
    <header class="navbar">
        <div class="logo">
            <h1><i class="fas fa-heartbeat"></i> JEEV<span class="highlight">RAKSHAK</span></h1>
        </div>
        <nav class="nav-links">
            <ul>
                <li><a href="#" id="staffing-link" class="nav-item"><i class="fas fa-users-cog"></i> Staffing</a></li>
                <!-- Analytics Removed -->
                <li><a href="#" id="patient-details-link" class="nav-item"><i class="fas fa-procedures"></i>
                        Patients</a></li>
                <li>
                    <div class="profile-dropdown-container">
                        <a href="#" class="profile-icon" id="profile-trigger">
                            <img src="https://ui-avatars.com/api/?name=Admin&background=0D8ABC&color=fff" alt="Profile">
                        </a>
                        <div class="profile-dropdown-menu" id="hospital-profile-dropdown">
                            <div class="dropdown-header">
                                <span class="welcome-label">Welcome,</span>
                                <span class="user-name-display">Administrator</span>
                            </div>
                            <a href="#" class="dropdown-item"><i class="fas fa-user-cog"></i> Profile</a>
                            <div class="dropdown-divider"></div>
                            <a href="#" id="logout-hospital-btn-dropdown" class="dropdown-item danger-item">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <main class="dashboard" id="main-dashboard-view">
        <div class="dashboard-grid">
            <div class="left-column">

                <section class="card critical-alerts glass-panel" id="critical-alerts-card">
                    <div class="card-header-row">
                        <h2>Critical Alerts</h2>
                        <span class="pulse-dot"></span>
                    </div>
                    <div class="alert-content" id="critical-alerts-content">
                        <div class="alert-item default-alert">
                            <i class="fas fa-check-circle"></i>
                            <div class="alert-text">
                                <strong>System Status: Stable</strong>
                                <p>No new SOS alerts requiring immediate attention.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="card patient-summary-card glass-panel">
                    <h2>Real-time Overview</h2>
                    <div class="patient-summary">
                        <div class="summary-card total-patients">
                            <div class="icon-box"><i class="fas fa-hospital-user"></i></div>
                            <div class="summary-info">
                                <h3>Total Admitted</h3>
                                <p id="report-total-patients">0</p>
                            </div>
                        </div>
                        <div class="summary-card critical-patients">
                            <div class="icon-box warning"><i class="fas fa-heart-broken"></i></div>
                            <div class="summary-info">
                                <h3>Critical</h3>
                                <p id="report-critical-patients">0</p>
                            </div>
                        </div>
                        <div class="summary-card stable-patients">
                            <div class="icon-box success"><i class="fas fa-smile"></i></div>
                            <div class="summary-info">
                                <h3>Stable</h3>
                                <p id="report-stable-patients">0</p>
                            </div>
                        </div>
                        <div class="summary-card doctor-requests">
                            <div class="icon-box info"><i class="fas fa-user-md"></i></div>
                            <div class="summary-info">
                                <h3>Requests</h3>
                                <p id="report-doctor-requests">0</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="card waiting-queue-card glass-panel">
                    <div class="card-header-row">
                        <h2>Doctor Request Queue</h2>
                        <span id="queue-count-badge" class="badge">0 Pending</span>
                    </div>
                    <div class="queue-content" id="request-queue-content">
                        <p class="empty-queue-message">
                            <i class="far fa-calendar-check"></i>
                            No pending requests. Great job!
                        </p>
                    </div>
                </section>

                <section class="card quick-actions glass-panel">
                    <h2>Management Console</h2>
                    <div class="actions-grid">
                        <button class="action-btn new-patient" id="admit-patient-btn">
                            <div class="btn-icon"><i class="fas fa-plus"></i></div>
                            <span>Admit Patient</span>
                        </button>
                        <button class="action-btn view-reports" id="view-reports-btn">
                            <div class="btn-icon"><i class="fas fa-file-medical-alt"></i></div>
                            <span>All Reports</span>
                        </button>
                        <div class="oxygen-control">
                            <label for="cylinder-quantity"><i class="fas fa-lungs"></i> Oxygen Supply</label>
                            <div class="control-row">
                                <input type="number" id="cylinder-quantity" value="5" min="1" max="50">
                                <button class="request-btn" onclick="requestCylinders()">Request</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div class="right-column">
                <section class="card staff-at-glance glass-panel">
                    <div class="card-header-row">
                        <h2>Staff Overview</h2>
                        <button class="action-btn-small" id="add-staff-btn"><i class="fas fa-user-plus"></i> Add
                            Staff</button>
                    </div>
                    <div class="staff-summary-grid">
                        <div class="staff-count doctor">
                            <i class="fas fa-user-md"></i>
                            <span id="dashboard-staff-doctors-count">0</span>
                            <small>Doctors</small>
                        </div>
                        <div class="staff-count nurse">
                            <i class="fas fa-user-nurse"></i>
                            <span id="dashboard-staff-nurses-count">0</span>
                            <small>Nurses</small>
                        </div>
                        <div class="staff-count admin">
                            <i class="fas fa-user-tie"></i>
                            <span id="dashboard-staff-admins-count">0</span>
                            <small>Admin</small>
                        </div>
                    </div>
                </section>

                <section class="card daily-task-list glass-panel">
                    <h2>Daily Tasks</h2>
                    <ul class="task-list">
                        <li class="task-item completed">Review discharge reports <i class="fas fa-check-circle"></i>
                        </li>
                        <li class="task-item">Morning rounds in Ward A <i class="fas fa-clock"></i></li>
                        <li class="task-item">Log inventory count <i class="fas fa-clock"></i></li>
                        <li class="task-item completed">Approve staff shifts <i class="fas fa-check-circle"></i></li>
                    </ul>
                </section>

                <section class="card weather-report glass-panel">
                    <h2>Weather & Environment</h2>
                    <div class="weather-box">
                        <i class="fas fa-sun weather-icon"></i>
                        <div class="weather-data">
                            <span class="temp">32Â°C</span>
                            <span class="condition">Sunny</span>
                        </div>
                    </div>
                    <div class="air-quality">
                        <div class="aqi-meter">
                            <div class="aqi-val good">55</div>
                            <div class="aqi-label">AQI (Good)</div>
                        </div>
                        <p class="aqi-desc">Ideal conditions for outdoor therapy sessions.</p>
                    </div>
                </section>


            </div>
        </div>
    </main>

    <section class="full-screen-view hidden-view" id="patient-details-view" style="display: none;">
        <div class="view-header">
            <button class="back-link" id="back-to-dashboard-from-patient-btn"><i class="fas fa-arrow-left"></i>
                Dashboard</button>
            <h2>Comprehensive Patient Report</h2>
        </div>
        <div class="report-content glass-panel-large">
            <div class="table-container">
                <table class="modern-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Age</th>
                            <th>Ward/Bed</th>
                            <th>Condition</th>
                            <th>Admitted At</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="patient-details-table-body">
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="full-screen-view hidden-view" id="single-patient-profile-view" style="display: none;">
        <div class="view-header">
            <button class="back-link" id="back-to-patient-list-from-profile-btn"><i class="fas fa-arrow-left"></i>
                Patient List</button>
            <h2 id="patient-details-header">Comprehensive Patient Report</h2>
        </div>

        <div class="report-content glass-panel-large">
            <div class="profile-actions-row">
                <button class="action-btn primary-action-btn" id="write-prescription-btn"><i
                        class="fas fa-file-prescription"></i> Write Prescription</button>
                <button class="action-btn danger-action-btn" id="delete-patient-btn"><i class="fas fa-trash"></i>
                    Discharge/Delete Patient</button>
            </div>

            <div class="patient-profile-details">
                <h3 class="section-title"><i class="fas fa-user-circle"></i> Patient Profile</h3>
                <div id="patient-basic-info" class="detail-grid">
                </div>

                <h3 class="section-title"><i class="fas fa-pills"></i> Prescription History</h3>
                <div id="patient-prescription-history">
                    <p class="empty-list-message">Loading prescription history...</p>
                </div>
            </div>
        </div>
    </section>

    <section class="full-screen-view hidden-view" id="patient-admission-view" style="display: none;">
        <div class="view-header">
            <button class="back-link" id="back-to-dashboard-from-admission-btn"><i class="fas fa-arrow-left"></i>
                Dashboard</button>
            <h2>Admit New Patient</h2>
        </div>
        <div class="form-container glass-panel-large">
            <form id="patient-admission-form" class="admission-form">
                <div class="form-grid">
                    <div class="input-group">
                        <label for="new-patient-id">Hospital ID</label>
                        <input type="text" id="new-patient-id" placeholder="HOSP001" required>
                    </div>
                    <div class="input-group">
                        <label for="new-patient-name">Full Name</label>
                        <input type="text" id="new-patient-name" required placeholder="Jane Doe">
                    </div>
                    <div class="input-group">
                        <label for="new-patient-age">Age</label>
                        <input type="number" id="new-patient-age" required min="1" max="120" placeholder="35">
                    </div>
                    <div class="input-group">
                        <label for="new-patient-ward">Ward / Room</label>
                        <input type="text" id="new-patient-ward" required placeholder="A-101 / ICU-3">
                    </div>
                    <div class="input-group full-width">
                        <label for="new-patient-condition">Initial Condition</label>
                        <select id="new-patient-condition" required>
                            <option value="Stable">Stable</option>
                            <option value="Fair">Fair</option>
                            <option value="Serious">Serious</option>
                            <option value="Critical">Critical</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="submit-btn primary-action-btn">
                    <i class="fas fa-bed"></i> Admit Patient
                </button>
            </form>
        </div>
    </section>

    <section class="full-screen-view hidden-view" id="staffing-report-view" style="display: none;">
        <div class="view-header">
            <button class="back-link" id="back-to-dashboard-btn"><i class="fas fa-arrow-left"></i> Dashboard</button>
            <h2>Hospital Staffing Report</h2>
            <button class="action-btn-small" id="add-staff-report-btn"><i class="fas fa-user-plus"></i> Add
                Staff</button>
        </div>
        <div class="report-content glass-panel-large">
            <div class="staff-summary-grid large-summary">
                <div class="staff-count doctor">
                    <i class="fas fa-user-md"></i>
                    <span id="report-staff-doctors-count">0</span>
                    <small>Doctors</small>
                </div>
                <div class="staff-count nurse">
                    <i class="fas fa-user-nurse"></i>
                    <span id="report-staff-nurses-count">0</span>
                    <small>Nurses</small>
                </div>
                <div class="staff-count admin">
                    <i class="fas fa-user-tie"></i>
                    <span id="report-staff-admins-count">0</span>
                    <small>Admin</small>
                </div>
            </div>

            <div class="table-container table-staff">
                <table class="modern-table">
                    <thead>
                        <tr>
                            <th>Staff ID</th>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Shift Status</th>
                            <th>Contact</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="staffing-table-body">
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="full-screen-view hidden-view" id="staff-admission-view" style="display: none;">
        <div class="view-header">
            <button class="back-link" id="back-to-staff-report-btn"><i class="fas fa-arrow-left"></i> Staffing
                Report</button>
            <h2>Onboard New Staff Member</h2>
        </div>
        <div class="form-container glass-panel-large">
            <form id="staff-admission-form" class="admission-form">
                <div class="form-grid">
                    <div class="input-group">
                        <label for="new-staff-id">Staff ID</label>
                        <input type="text" id="new-staff-id" placeholder="S001" required>
                    </div>
                    <div class="input-group">
                        <label for="new-staff-name">Full Name</label>
                        <input type="text" id="new-staff-name" required placeholder="John Doe">
                    </div>
                    <div class="input-group full-width">
                        <label for="new-staff-role">Role</label>
                        <input type="text" id="new-staff-role" required
                            placeholder="Emergency Physician / Charge Nurse">
                    </div>
                    <div class="input-group">
                        <label for="new-staff-shift">Shift</label>
                        <select id="new-staff-shift" required>
                            <option value="Day">Day</option>
                            <option value="Night">Night</option>
                            <option value="On-Call">On-Call</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="new-staff-contact">Contact/Extension</label>
                        <input type="text" id="new-staff-contact" required placeholder="x101 or 9876543210">
                    </div>
                </div>

                <button type="submit" class="submit-btn primary-action-btn" id="submit-staff-btn">
                    <i class="fas fa-user-plus"></i> Add Staff Member
                </button>
            </form>
        </div>
    </section>

    <div id="prescription-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3>Write Prescription for <span id="prescribe-patient-name"></span></h3>
                <button class="close-modal-clean"
                    onclick="document.getElementById('prescription-modal').style.display='none'">&times;</button>
            </div>
            <form id="prescription-form">
                <input type="hidden" id="prescribe-patient-id">
                <div class="input-group full-width">
                    <label for="prescription-doctor-name">Doctor's Name (Optional)</label>
                    <input type="text" id="prescription-doctor-name" placeholder="Dr. John Smith">
                </div>
                <div class="input-group full-width">
                    <label for="prescription-text">Prescription Details</label>
                    <textarea id="prescription-text" rows="8" required
                        placeholder="e.g. 1. Paracetamol 500mg, 1 tablet twice daily for 3 days. 2. Rest for 2 days."></textarea>
                </div>
                <button type="submit" class="submit-btn primary-action-btn"><i class="fas fa-save"></i> Save
                    Prescription</button>
            </form>
        </div>
    </div>

    <!-- NEW: Resolve Request Modal (Replaces Prompt/Alert) -->
    <div id="resolve-request-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3>Resolve Request for <span id="resolve-patient-name"></span></h3>
                <button class="close-modal-clean" onclick="closeResolveModal()">&times;</button>
            </div>
            <form id="resolve-request-form">
                <input type="hidden" id="resolve-request-id">
                <div class="input-group full-width">
                    <label for="resolve-prescription-text">Prescription / Resolution Notes</label>
                    <textarea id="resolve-prescription-text" rows="6" required
                        placeholder="Enter prescription or resolution notes..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="action-btn-small" onclick="closeResolveModal()">Cancel</button>
                    <button type="submit" class="submit-btn primary-action-btn"><i class="fas fa-check-circle"></i>
                        Resolve & Complete</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NEW: Generic Message Modal (Success/Error Box) -->
    <div id="message-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content glass-panel message-box">
            <div class="message-icon-wrapper" id="msg-modal-icon-wrapper">
                <i id="msg-modal-icon" class="fas fa-check-circle"></i>
            </div>
            <h3 id="msg-modal-title">Success</h3>
            <p id="msg-modal-text">Operation completed successfully.</p>
            <button class="submit-btn primary-action-btn full-width" onclick="closeMessageModal()">OK</button>
        </div>
    </div>


    <!-- Custom Notification Container -->
    <div id="notification-container"></div>

    <script src="hospital.js"></script>
    <!-- CONFIRMATION MODAL (Generic) -->
    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content warning-theme">
            <span class="close-btn" onclick="closeConfirmationModal()">&times;</span>
            <div class="modal-header">
                <div class="modal-icon-box warning-icon-box">
                    <i class="fas fa-question-circle"></i>
                </div>
                <h4 id="confirmation-title">Are you sure?</h4>
            </div>
            <div class="modal-body">
                <p id="confirmation-message">This action cannot be undone.</p>
            </div>
            <div class="modal-footer action-row">
                <button class="action-btn-secondary" onclick="closeConfirmationModal()">Cancel</button>
                <button class="action-btn danger-action-btn" id="confirm-action-btn">Yes, Proceed</button>
            </div>
        </div>
    </div>
</body>

</html>